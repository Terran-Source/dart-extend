# Automatically generated on 2021-09-13 UTC from https://codemagic.io/app/613f7c3ff53ad33abb9aa041/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  # ios-workflow:
  #   name: Mac Workflow
  #   max_build_duration: 30
  #   environment:
  #     flutter: stable
  #     xcode: latest
  #     cocoapods: default
  #   cache:
  #     cache_paths:
  #       - ~/.pub-cache
  #   triggering:
  #     events:
  #       - push
  #       - pull_request
  #       - tag
  #     branch_patterns:
  #       - pattern: main
  #         include: true
  #         source: true
  #       - pattern: dev
  #         include: true
  #         source: true
  #       - pattern: feature/*
  #         include: true
  #         source: true
  #     tag_patterns:
  #       - pattern: v[1-9]*.[0-9]*
  #         include: true
  #       - pattern: v[1-9]*.[0-9]*.[0-9]*
  #         include: true
  #   scripts:
  #     - flutter packages pub get
  #     - 'flutter '
  #     - flutter pub global run dart_code_metrics:metrics analyze lib
  #     - dart test
  #     - dart run ./example/extend_example.dart
  #   artifacts:
  #     - flutter_drive.log
  #   publishing:
  #     email:
  #       recipients:
  #         - patra.tamal@gmail.com
  dart-workflow:
    name: Dart Workflow
    max_build_duration: 30
    environment:
      flutter: stable
    cache:
      cache_paths:
        - $FLUTTER_ROOT/.pub-cache
    triggering:
      events:
        - push
        - pull_request
        - tag
      branch_patterns:
        - pattern: main
          include: true
          source: true
        - pattern: dev
          include: true
          source: true
        - pattern: feature/*
          include: true
          source: true
        - pattern: hotfix/*
          include: true
          source: true
      tag_patterns:
        - pattern: v[1-9]*.[0-9]*
          include: true
        - pattern: v[1-9]*.[0-9]*.[0-9]*
          include: true
    scripts:
      - name: Check Dependency versions
        script: |
          PROJECT_PATH="$(pwd)"
          FLUTTER_PATH="$(which flutter)"
          echo "Project path: $PROJECT_PATH"
          echo "Flutter path: $FLUTTER_PATH"
          echo "Flutter root path: $FLUTTER_ROOT"
          ls -al $FLUTTER_PATH
          flutter --version
          dart --version
      - name: Goto Project Directory
        script: cd $PROJECT_PATH
      - name: Get Dart packages
        script: flutter packages pub get
      - 'flutter '
      - flutter pub global run dart_code_metrics:metrics analyze lib
      - dart test
      - dart run ./example/extend_example.dart
    artifacts:
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - patra.tamal@gmail.com
